"use strict";var ze=Object.defineProperty;var xe=i=>{throw TypeError(i)};var ge=(i,e,t)=>e in i?ze(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t;var r=(i,e,t)=>ge(i,typeof e!="symbol"?e+"":e,t),we=(i,e,t)=>e.has(i)||xe("Cannot "+t);var s=(i,e,t)=>(we(i,e,"read from private field"),t?t.call(i):e.get(i)),a=(i,e,t)=>e.has(i)?xe("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(i):e.set(i,t),c=(i,e,t,n)=>(we(i,e,"write to private field"),n?n.call(i,t):e.set(i,t),t);Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const Te=i=>{const e=t=>{const n=t.target;i&&!i.contains(n)&&!t.defaultPrevented&&i.dispatchEvent(new CustomEvent("clickout",{detail:{node:i}}))};return window.addEventListener("click",e),()=>window.removeEventListener("click",e)},Ie=i=>{const e=new i.Mesh(new i.PlaneGeometry(2,2),new i.MeshLambertMaterial({map:i.textureCallback(),side:i.DoubleSide,color:16777215,transparent:!1}));return{mesh:e,update:()=>{e.material.map=i.textureCallback()},dispose:()=>{e.geometry.dispose(),e.material.dispose()}}},Pe=i=>new i(new Uint8Array(1),1,1),Ee=i=>-1*Math.cos(i*(Math.PI/2))+1,be=i=>Math.sin(i*(Math.PI/2)),Oe=i=>-.5*(Math.cos(Math.PI*i)-1),Se=i=>i*i,Ce=i=>i*(2-i),De=i=>i<.5?2*i*i:-1+(4-2*i)*i,Le=i=>i*i*i,Fe=i=>{const e=i-1;return e*e*e+1},ke=i=>i<.5?4*i*i*i:(i-1)*(2*i-2)*(2*i-2)+1,Ne=i=>i*i*i*i,Qe=i=>{const e=i-1;return 1-e*e*e*e},je=i=>{const e=i-1;return i<.5?8*i*i*i*i:1-8*e*e*e*e},We=i=>i*i*i*i*i,Ae=i=>{const e=i-1;return 1+e*e*e*e*e},Be=i=>{const e=i-1;return i<.5?16*i*i*i*i*i:1+16*e*e*e*e*e},Re=i=>i===0?0:Math.pow(2,10*(i-1)),qe=i=>i===1?1:-Math.pow(2,-10*i)+1,$e=i=>{if(i===0||i===1)return i;const e=i*2,t=e-1;return e<1?.5*Math.pow(2,10*t):.5*(-Math.pow(2,-10*t)+2)},Ve=i=>{const e=i/1;return-1*(Math.sqrt(1-e*i)-1)},Xe=i=>{const e=i-1;return Math.sqrt(1-e*e)},Ye=i=>{const e=i*2,t=e-2;return e<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-t*t)+1)},He=(i,e=1.70158)=>i*i*((e+1)*i-e),Ze=(i,e=1.70158)=>{const t=i/1-1;return t*t*((e+1)*t+e)+1},Ue=(i,e=1.70158)=>{const t=i*2,n=t-2,o=e*1.525;return t<1?.5*t*t*((o+1)*t-o):.5*(n*n*((o+1)*n+o)+2)},Ge=(i,e=.7)=>{if(i===0||i===1)return i;const n=i/1-1,o=1-e,u=o/(2*Math.PI)*Math.asin(1);return-(Math.pow(2,10*n)*Math.sin((n-u)*(2*Math.PI)/o))},Je=(i,e=.7)=>{if(i===0||i===1)return i;const t=1-e,n=i*2,o=t/(2*Math.PI)*Math.asin(1);return Math.pow(2,-10*n)*Math.sin((n-o)*(2*Math.PI)/t)+1},Ke=(i,e=.65)=>{if(i===0||i===1)return i;const t=1-e,n=i*2,o=n-1,u=t/(2*Math.PI)*Math.asin(1);return n<1?-.5*(Math.pow(2,10*o)*Math.sin((o-u)*(2*Math.PI)/t)):Math.pow(2,-10*o)*Math.sin((o-u)*(2*Math.PI)/t)*.5+1},fe=i=>{const e=i/1;if(e<1/2.75)return 7.5625*e*e;if(e<2/2.75){const t=e-.5454545454545454;return 7.5625*t*t+.75}else if(e<2.5/2.75){const t=e-.8181818181818182;return 7.5625*t*t+.9375}else{const t=e-.9545454545454546;return 7.5625*t*t+.984375}},ye=i=>1-fe(1-i),_e=i=>i<.5?ye(i*2)*.5:fe(i*2-1)*.5+.5,ne=(i,e,t)=>Math.max(e,Math.min(t,i)),et=(i,e,t)=>i>=e-t&&i<=e+t,Me=(i,e,t)=>(1-t)*i+t*e,k=(i,e,t,n,o=1e-4)=>i<=e+o&&i>=e-o?i:Me(i,e,1-Math.exp(-t*n)),tt=(i,e,t,n,o=1e-4)=>{i.x=k(i.x,e.x,t,n,o),i.y=k(i.y,e.y,t,n,o),i.x=k(i.x,e.x,t,n,o),i.y=k(i.y,e.y,t,n,o),typeof i.z=="number"&&typeof e.z=="number"&&(i.z=k(i.z,e.z,t,n,o)),typeof i.w=="number"&&typeof e.w=="number"&&(i.w=k(i.w,e.w,t,n,o))},ue=()=>(typeof performance>"u"?Date:performance).now(),it=i=>new Promise(e=>setTimeout(e,i));var T;class V{constructor(){a(this,T);c(this,T,new Set)}get size(){return s(this,T).size}addListener(...e){for(let t=0,n=e.length;t<n;t++)s(this,T).add(e[t])}removeListener(...e){for(let t=0,n=e.length;t<n;t++)s(this,T).delete(e[t])}fire(...e){s(this,T).forEach(t=>{t(...e)})}clear(){s(this,T).clear()}}T=new WeakMap;const $=i=>i&&i();var N,Q,X,j,Y;class st extends V{constructor(){super();a(this,N);a(this,Q,!0);a(this,X,0);a(this,j);r(this,"uniforms",Object.freeze({uTime:{value:0},uDeltaTime:{value:0},uDeltaMs:{value:0}}));a(this,Y,t=>{const{uTime:n,uDeltaTime:o,uDeltaMs:u}=this.uniforms;n.value=t,u.value=Math.abs(t-s(this,X)),o.value=u.value*.001,c(this,X,t),super.fire({time:t,deltaTime:o.value,deltaMs:u.value}),!s(this,j)&&c(this,N,requestAnimationFrame(s(this,Y)))});r(this,"play",t=>{c(this,j,t),s(this,Q)&&(c(this,Q,!1),c(this,X,ue()),t?t.setAnimationLoop(s(this,Y)):c(this,N,requestAnimationFrame(s(this,Y))))});r(this,"pause",t=>{c(this,Q,!0),t?t.setAnimationLoop(null):typeof s(this,N)=="number"&&cancelAnimationFrame(s(this,N))});r(this,"debug",t=>{t.add({paused:this.paused},"paused").onChange(n=>{n?this.pause(s(this,j)):this.play(s(this,j))})});r(this,"interpolate",({from:t=0,to:n=1,onStart:o,onUpdate:u,onComplete:l})=>{const p=Math.abs(t),f=Math.abs(n),m=t<n?1:-1;let h=p;const y=x=>{h+=x.deltaTime,h=ne(h,p,f),typeof u=="function"&&u({value:h*m,...x}),h===f&&(typeof l=="function"&&l({value:h*m,...x}),this.removeListener(y))},{uDeltaMs:M,uDeltaTime:w,uTime:v}=this.uniforms;typeof o=="function"&&o({value:t,time:v.value,deltaTime:w.value,deltaMs:M.value}),this.addListener(y)});r(this,"animate",({steps:t=0,duration:n=400,delay:o=0,iterations:u=0,onStart:l,onUpdate:p,onComplete:f})=>{let m,h=0,y=0,M=0;const w=({time:x})=>{const ce=Math.abs(x-h);if(t>0){const ve=Math.min(Math.floor(ce/n*t),t-1);ve!==y&&(y=ve,$(p))}else $(p);ce>=n&&(this.removeListener(w),$(p),$(f),M++,(u<0||u===1/0||M<u)&&(typeof m=="number"&&clearTimeout(m),o>0?m=setTimeout(()=>{h=ue(),$(l),this.addListener(w)},o):v()))},v=()=>{h=ue(),$(l),this.addListener(w)};return typeof m=="number"&&clearTimeout(m),o>0?m=setTimeout(v,o):v(),()=>this.removeListener(w)})}get paused(){return s(this,Q)}}N=new WeakMap,Q=new WeakMap,X=new WeakMap,j=new WeakMap,Y=new WeakMap;class nt{constructor({instance:e,controls:t,Vector3:n}){r(this,"uniforms");r(this,"direction");r(this,"instance");r(this,"controls");r(this,"resize",({width:e,height:t})=>{const{instance:n}=this;n!=null&&n.aspect&&(n.aspect=e/t),this.instance.updateProjectionMatrix()});r(this,"update",({deltaTime:e})=>{this.instance.getWorldDirection(this.uniforms.uDirection.value),this.controls&&this.controls.update(e)});r(this,"clear",()=>{const{controls:e,instance:t}=this;t.clear(),e&&(e.disconnect(),e.dispose())});r(this,"debug",e=>{const{instance:t,controls:n,direction:o}=this;n&&e.add(n,"enabled").name("camera controls"),e.add(t.position,"x").name("camera position x").listen(),e.add(t.position,"y").name("camera position y").listen(),e.add(t.position,"z").name("camera position z").listen(),o&&(e.add(o,"x").name("camera direction x").onChange(()=>{t.lookAt(o)}).listen(),e.add(o,"y").name("camera direction y").onChange(()=>{t.lookAt(o)}).listen(),e.add(o,"z").name("camera direction z").onChange(()=>{t.lookAt(o)}).listen())});this.uniforms=Object.freeze({uDirection:{value:new n}}),this.instance=e,this.controls=t,this.controls&&this.controls.addEventListener("change",()=>{const{uDirection:o}=this.uniforms;this.instance.getWorldDirection(o.value)})}}var oe,H,Z,U,W,G,J,K,S,_,re,ae,ee,le,he,pe,A,B,R;class ot{constructor({Plane:e,Raycaster:t,Vector2:n,Vector3:o,camera:u}){r(this,"uniforms");a(this,oe);a(this,H);a(this,Z);a(this,U);a(this,W);a(this,G);a(this,J);a(this,K);a(this,S);a(this,_,new V);a(this,re,new V);a(this,ae,new V);a(this,ee,()=>{s(this,S)&&(s(this,S).innerHTML=`
			<p>Mouse position x ${this.uniforms.uMousePosition.value.x.toFixed(2)} y ${this.uniforms.uMousePosition.value.y.toFixed(2)}</p>
			<p>Mouse world position x ${this.uniforms.uMouseWorldPosition.value.x.toFixed(2)} y ${this.uniforms.uMouseWorldPosition.value.y.toFixed(2)} z ${this.uniforms.uMouseWorldPosition.value.z.toFixed(2)}</p>
			<p>Mouse velocity x ${this.uniforms.uMouseVelocity.value.x.toFixed(2)} y ${this.uniforms.uMouseVelocity.value.y.toFixed(2)}</p>
			<p>Mouse press ${this.uniforms.uMousePress.value}</p>
			<p>Scroll x ${this.uniforms.uScroll.value.x.toFixed(2)} y ${this.uniforms.uScroll.value.y.toFixed(2)}</p>
		
		`)});a(this,le,e=>{const t=e,n=t.target;let o=0,u=0;if(n instanceof HTMLCanvasElement)o=n.width,u=n.height;else if(n instanceof HTMLElement){const{width:p,height:f}=n.getBoundingClientRect();o=p,u=f}else o=window.innerWidth,u=window.innerHeight;const{uMousePosition:l}=this.uniforms;l.value.x=t.clientX/o*2-1,l.value.y=-(t.clientY/u)*2+1});a(this,he,e=>{const t=e,{uMouseVelocity:n}=this.uniforms,o=t.pageX,u=t.pageY,l=s(this,W).x,p=s(this,W).y;n.value.x=Math.abs(o-l),n.value.y=Math.abs(u-p),s(this,W).set(o,u),typeof s(this,G)=="number"&&clearTimeout(s(this,G)),c(this,G,setTimeout(()=>{n.value.set(0,0)},200))});a(this,pe,()=>{const{uMouseWorldPosition:e,uMousePosition:t}=this.uniforms;s(this,J).getWorldDirection(s(this,K)),s(this,Z).setFromCamera(t.value,s(this,J)),s(this,H).setFromNormalAndCoplanarPoint(s(this,K),s(this,oe)),s(this,Z).ray.intersectPlane(s(this,H),e.value)});a(this,A,e=>{s(this,le).call(this,e),s(this,pe).call(this),s(this,he).call(this,e),s(this,ee).call(this),s(this,_).fire()});a(this,B,e=>{const{uScroll:t,uScrollVelocity:n}=this.uniforms;s(this,U).copy(t.value);const o=window.scrollX/(document.body.scrollWidth-window.innerWidth),u=window.scrollY/(document.body.scrollHeight-window.innerHeight);t.value.x=o,t.value.y=u,e.type==="scroll"?n.value.subVectors(t.value,s(this,U)):n.value.set(0,0),s(this,ee).call(this),s(this,ae).fire()});a(this,R,e=>{const t=e,{uMousePress:n}=this.uniforms;t.pointerType==="mouse"?n.value=t.pressure?1:0:n.value=t.pressure,s(this,ee).call(this),s(this,re).fire()});r(this,"onMove",(...e)=>{s(this,_).addListener(...e)});r(this,"onPress",(...e)=>{s(this,re).addListener(...e)});r(this,"onScroll",(...e)=>{s(this,ae).addListener(...e)});r(this,"init",e=>{e.addEventListener("pointermove",s(this,A),!1),e.addEventListener("pointerout",s(this,A),!1),e.addEventListener("pointerdown",s(this,R),!1),e.addEventListener("pointerup",s(this,R),!1),window.addEventListener("scroll",s(this,B),!1),window.addEventListener("scrollend",s(this,B),!1)});r(this,"clear",e=>{s(this,_).clear(),e.removeEventListener("pointermove",s(this,A),!1),e.removeEventListener("pointerout",s(this,A),!1),e.removeEventListener("pointerdown",s(this,R),!1),e.removeEventListener("pointerup",s(this,R),!1),window.removeEventListener("scroll",s(this,B),!1),window.removeEventListener("scrollend",s(this,B),!1)});r(this,"debug",e=>{c(this,S,document.createElement("div")),s(this,S).style.padding="3px",e.domElement.appendChild(s(this,S))});this.uniforms=Object.freeze({uScroll:{value:new n},uScrollVelocity:{value:new n},uMousePress:{value:0},uMousePosition:{value:new n},uMouseWorldPosition:{value:new o},uMouseVelocity:{value:new n}}),c(this,oe,new o),c(this,H,new e),c(this,Z,new t),c(this,U,new n),c(this,W,new n),c(this,J,u),c(this,K,new o)}}oe=new WeakMap,H=new WeakMap,Z=new WeakMap,U=new WeakMap,W=new WeakMap,G=new WeakMap,J=new WeakMap,K=new WeakMap,S=new WeakMap,_=new WeakMap,re=new WeakMap,ae=new WeakMap,ee=new WeakMap,le=new WeakMap,he=new WeakMap,pe=new WeakMap,A=new WeakMap,B=new WeakMap,R=new WeakMap;const rt=function(i,e,t,n){const o=function(u,l,p){var h,y;const f=(h=u.getShaderInfoLog(l))==null?void 0:h.trim(),m="Errors in "+p+`:

`+f;if(f!==""){const M=(y=u.getShaderSource(l))==null?void 0:y.replace(/\t/g,"  "),w=M==null?void 0:M.split(`
`);let v="",x=1;if(!w)return;for(const ce of w)v+=(x<10?" ":"")+x+":		"+ce+`
`,x++;console.error(m+`
`+v)}};o(i,t,"Vertex Shader"),o(i,n,"Fragment Shader")};class at{constructor({instance:e,Vector2:t,EffectComposer:n}){r(this,"uniforms");r(this,"instance");r(this,"composer");r(this,"addEffect",(...e)=>{e.forEach(t=>{if(!this.composer||!this.instance)return console.warn("EffectComposer not initialized");this.composer.addPass(t)})});r(this,"removeEffect",(...e)=>{e.forEach(t=>{var n;t.dispose(),(n=this.composer)==null||n.removePass(t)})});r(this,"update",(e,t,n=.16)=>{this.instance&&(this.composer?this.composer.render(n):this.instance.render(e,t))});r(this,"resize",e=>{const{width:t,height:n,pixelRatio:o}=e;this.instance&&(this.instance.setSize(t,n,!1),this.instance.setPixelRatio(o),this.uniforms.uResolution.value.set(t,n),this.composer&&this.composer.setSize(t,n))});r(this,"clear",()=>{this.instance&&this.instance.dispose(),this.composer&&this.removeEffect(...this.composer.passes)});r(this,"debug",e=>{const{instance:t}=this;t&&(t.debug.checkShaderErrors=!0,t.debug.onShaderError=rt,e.add(t,"toneMapping",{NoToneMapping:0,LinearToneMapping:1,ReinhardToneMapping:2,CineonToneMapping:3,ACESFilmicToneMapping:4,CustomToneMapping:5,AgXToneMapping:6,NeutralToneMapping:7}).name("tone mapping"),e.add(t,"toneMappingExposure",0,1).name("tone mapping exposure"))});this.uniforms=Object.freeze({uResolution:{value:new t}}),this.instance=e,this.instance.debug.checkShaderErrors=!1,n&&(this.composer=new n(this.instance))}}var I,C,D,te,P,L,ie;class ct extends V{constructor(t){super();a(this,I,7680);a(this,C,1280);a(this,D,720);a(this,te,1);a(this,P,1);a(this,L);r(this,"fire",()=>{let t=s(this,C),n=s(this,D);if(s(this,C)>s(this,I)||s(this,D)>s(this,I))if(t>n){const u=n/t;t=ne(t,0,s(this,I)),n=t*u}else{const u=t/n;n=ne(n,0,s(this,I)),t=n*u}t*=s(this,P),n*=s(this,P);const o=s(this,te);super.fire({width:t,height:n,pixelRatio:o})});a(this,ie,new ResizeObserver(t=>{const n=t[0].contentBoxSize[0],{inlineSize:o,blockSize:u}=n;s(this,C)===o&&s(this,D)===u||(c(this,C,o),c(this,D,u),this.fire())}));r(this,"debug",t=>{t.add({maxSize:this.maxSize},"maxSize",0,7680).name("max resolution").onChange(n=>{this.maxSize=n}),t.add({resolutionFactor:this.resolutionFactor},"resolutionFactor",0,1).name("resolution factor").onChange(n=>{this.resolutionFactor=n})});c(this,te,Math.min(window.devicePixelRatio,2)),c(this,L,t),s(this,ie).observe(s(this,L)),this.fire()}get width(){return s(this,C)*s(this,P)}get height(){return s(this,D)*s(this,P)}get element(){return s(this,L)}get pixelRatio(){return s(this,te)}get maxSize(){return s(this,I)}get resolutionFactor(){return s(this,P)}set resolutionFactor(t){c(this,P,ne(t,.01,1)),this.fire()}set maxSize(t){c(this,I,t<32?32:t),this.fire()}clear(){super.clear(),s(this,L)&&s(this,ie).unobserve(s(this,L)),s(this,ie).disconnect()}}I=new WeakMap,C=new WeakMap,D=new WeakMap,te=new WeakMap,P=new WeakMap,L=new WeakMap,ie=new WeakMap;const O=class O{constructor({instance:e}){r(this,"instance");r(this,"clear",()=>{this.instance.children.forEach(e=>O.disposeNode(e)),this.instance.clear()});this.instance=e}};r(O,"disposeMaterial",e=>{Object.values(e).forEach(t=>{typeof(t==null?void 0:t.dispose)=="function"&&t.dispose()})}),r(O,"disposeNode",e=>{if(!e)return;const t=e;t!=null&&t.geometry&&t.geometry.dispose(),t!=null&&t.material&&(Array.isArray(t.material)?t.material.forEach(n=>{O.disposeMaterial(n),n.dispose()}):(O.disposeMaterial(t.material),t.material.dispose())),t.children.forEach(n=>O.disposeNode(n))});let de=O;var z,E,se,d,q,b;class ut{constructor(e,t){a(this,z,{mass:.5,tension:.5,friction:.5,threshold:.1,onUpdate:void 0,onComplete:void 0});a(this,E,0);a(this,se,0);a(this,d,0);a(this,q,0);a(this,b,!1);r(this,"from",e=>(c(this,se,e),c(this,d,e),this));r(this,"to",(e,t)=>(c(this,E,e),Math.abs(s(this,q))<s(this,z).threshold&&Math.abs(s(this,E)-s(this,d))<s(this,z).threshold?this:(t&&c(this,z,{...s(this,z),...t}),c(this,b,!1),this)));r(this,"update",(e=.016)=>{if(s(this,b))return;const{mass:t,tension:n,friction:o,threshold:u,onComplete:l,onUpdate:p}=s(this,z),f=Math.min(e,.06),m=s(this,q)??0,h=typeof s(this,d)=="number"?s(this,d):s(this,se),y=-1*n*(h-s(this,E)),M=-1*m*o,w=(y+M)/t,v=m+w*f,x=h+v*f;c(this,b,Math.abs(v)<u&&Math.abs(x-s(this,E))<u),c(this,d,s(this,b)?s(this,E):x),c(this,q,v),s(this,b)?(c(this,d,s(this,E)),l&&l(s(this,d))):p&&p(s(this,d))});c(this,d,e||0),c(this,se,e||0),c(this,z,{...s(this,z),...t})}get value(){return s(this,d)}get velocity(){return s(this,q)}get finished(){return s(this,b)}}z=new WeakMap,E=new WeakMap,se=new WeakMap,d=new WeakMap,q=new WeakMap,b=new WeakMap;var F,g,me;class lt{constructor(){a(this,F,[]);a(this,g,!1);a(this,me,async()=>{if(!s(this,g)){for(c(this,g,!0);s(this,F).length>0&&s(this,g);){const e=s(this,F).shift();if(e)try{await e()}catch(t){console.error("Timeline error:",t)}}c(this,g,!1)}});r(this,"add",(...e)=>{s(this,F).push(...e)});r(this,"play",async()=>{c(this,g,!1),await s(this,me).call(this)});r(this,"stop",()=>{c(this,g,!1)});r(this,"clear",()=>{this.stop(),c(this,F,[])})}get isPlaying(){return s(this,g)}get size(){return s(this,F).length}}F=new WeakMap,g=new WeakMap,me=new WeakMap;var ht=`vec4 mod289(vec4 x){return x-floor(x*(1.0/289.0))*289.0;}float mod289(float x){return x-floor(x*(1.0/289.0))*289.0;}vec4 permute(vec4 x){return mod289(((x*34.0)+1.0)*x);}float permute(float x){return mod289(((x*34.0)+1.0)*x);}vec4 taylorInvSqrt(vec4 r){return 1.79284291400159-0.85373472095314*r;}float taylorInvSqrt(float r){return 1.79284291400159-0.85373472095314*r;}vec4 grad4(float j,vec4 ip){const vec4 ones=vec4(1.0,1.0,1.0,-1.0);vec4 p,s;p.xyz=floor(fract(vec3(j)*ip.xyz)*7.0)*ip.z-1.0;p.w=1.5-dot(abs(p.xyz),ones.xyz);s=vec4(lessThan(p,vec4(0.0)));p.xyz=p.xyz+(s.xyz*2.0-1.0)*s.www;return p;}
#define F4 0.309016994374947451
vec4 simplexNoiseDerivatives(vec4 v){const vec4 C=vec4(0.138196601125011,0.276393202250021,0.414589803375032,-0.447213595499958);vec4 i=floor(v+dot(v,vec4(F4)));vec4 x0=v-i+dot(i,C.xxxx);vec4 i0;vec3 isX=step(x0.yzw,x0.xxx);vec3 isYZ=step(x0.zww,x0.yyz);i0.x=isX.x+isX.y+isX.z;i0.yzw=1.0-isX;i0.y+=isYZ.x+isYZ.y;i0.zw+=1.0-isYZ.xy;i0.z+=isYZ.z;i0.w+=1.0-isYZ.z;vec4 i3=clamp(i0,0.0,1.0);vec4 i2=clamp(i0-1.0,0.0,1.0);vec4 i1=clamp(i0-2.0,0.0,1.0);vec4 x1=x0-i1+C.xxxx;vec4 x2=x0-i2+C.yyyy;vec4 x3=x0-i3+C.zzzz;vec4 x4=x0+C.wwww;i=mod289(i);float j0=permute(permute(permute(permute(i.w)+i.z)+i.y)+i.x);vec4 j1=permute(permute(permute(permute(i.w+vec4(i1.w,i2.w,i3.w,1.0))+i.z+vec4(i1.z,i2.z,i3.z,1.0))+i.y+vec4(i1.y,i2.y,i3.y,1.0))+i.x+vec4(i1.x,i2.x,i3.x,1.0));vec4 ip=vec4(1.0/294.0,1.0/49.0,1.0/7.0,0.0);vec4 p0=grad4(j0,ip);vec4 p1=grad4(j1.x,ip);vec4 p2=grad4(j1.y,ip);vec4 p3=grad4(j1.z,ip);vec4 p4=grad4(j1.w,ip);vec4 norm=taylorInvSqrt(vec4(dot(p0,p0),dot(p1,p1),dot(p2,p2),dot(p3,p3)));p0*=norm.x;p1*=norm.y;p2*=norm.z;p3*=norm.w;p4*=taylorInvSqrt(dot(p4,p4));vec3 values0=vec3(dot(p0,x0),dot(p1,x1),dot(p2,x2));vec2 values1=vec2(dot(p3,x3),dot(p4,x4));vec3 m0=max(0.5-vec3(dot(x0,x0),dot(x1,x1),dot(x2,x2)),0.0);vec2 m1=max(0.5-vec2(dot(x3,x3),dot(x4,x4)),0.0);vec3 temp0=-6.0*m0*m0*values0;vec2 temp1=-6.0*m1*m1*values1;vec3 mmm0=m0*m0*m0;vec2 mmm1=m1*m1*m1;float dx=temp0[0]*x0.x+temp0[1]*x1.x+temp0[2]*x2.x+temp1[0]*x3.x+temp1[1]*x4.x+mmm0[0]*p0.x+mmm0[1]*p1.x+mmm0[2]*p2.x+mmm1[0]*p3.x+mmm1[1]*p4.x;float dy=temp0[0]*x0.y+temp0[1]*x1.y+temp0[2]*x2.y+temp1[0]*x3.y+temp1[1]*x4.y+mmm0[0]*p0.y+mmm0[1]*p1.y+mmm0[2]*p2.y+mmm1[0]*p3.y+mmm1[1]*p4.y;float dz=temp0[0]*x0.z+temp0[1]*x1.z+temp0[2]*x2.z+temp1[0]*x3.z+temp1[1]*x4.z+mmm0[0]*p0.z+mmm0[1]*p1.z+mmm0[2]*p2.z+mmm1[0]*p3.z+mmm1[1]*p4.z;float dw=temp0[0]*x0.w+temp0[1]*x1.w+temp0[2]*x2.w+temp1[0]*x3.w+temp1[1]*x4.w+mmm0[0]*p0.w+mmm0[1]*p1.w+mmm0[2]*p2.w+mmm1[0]*p3.w+mmm1[1]*p4.w;return vec4(dx,dy,dz,dw)*49.0;}vec3 curl(in vec3 p,in float noiseTime,in float persistence){vec4 xNoisePotentialDerivatives=vec4(0.0);vec4 yNoisePotentialDerivatives=vec4(0.0);vec4 zNoisePotentialDerivatives=vec4(0.0);for(int i=0;i<3;++i){float twoPowI=pow(2.0,float(i));float scale=0.5*twoPowI*pow(persistence,float(i));xNoisePotentialDerivatives+=simplexNoiseDerivatives(vec4(p*twoPowI,noiseTime))*scale;yNoisePotentialDerivatives+=simplexNoiseDerivatives(vec4((p+vec3(123.4,129845.6,-1239.1))*twoPowI,noiseTime))*scale;zNoisePotentialDerivatives+=simplexNoiseDerivatives(vec4((p+vec3(-9519.0,9051.0,-123.0))*twoPowI,noiseTime))*scale;}return vec3(zNoisePotentialDerivatives[1]-yNoisePotentialDerivatives[2],xNoisePotentialDerivatives[2]-zNoisePotentialDerivatives[0],yNoisePotentialDerivatives[0]-xNoisePotentialDerivatives[1]);}`,pt="varying vec2 vUv;void main(){vUv=uv;gl_Position=projectionMatrix*modelViewMatrix*vec4(position,1.);}";exports.Animator=st;exports.CameraWrapper=nt;exports.MonoEventEmitter=V;exports.MousePointer=ot;exports.RendererWrapper=at;exports.Resizer=ct;exports.SceneWrapper=de;exports.Spring=ut;exports.TaskQueue=lt;exports.clamp=ne;exports.clickout=Te;exports.createDebugTexture=Ie;exports.createEmpytTexture=Pe;exports.curl=ht;exports.dampThreshold=k;exports.dampThresholdVec=tt;exports.easeInBack=He;exports.easeInBounce=ye;exports.easeInCirc=Ve;exports.easeInCubic=Le;exports.easeInElastic=Ge;exports.easeInExpo=Re;exports.easeInOutBack=Ue;exports.easeInOutBounce=_e;exports.easeInOutCirc=Ye;exports.easeInOutCubic=ke;exports.easeInOutElastic=Ke;exports.easeInOutExpo=$e;exports.easeInOutQuad=De;exports.easeInOutQuart=je;exports.easeInOutQuint=Be;exports.easeInOutSine=Oe;exports.easeInQuad=Se;exports.easeInQuart=Ne;exports.easeInQuint=We;exports.easeInSine=Ee;exports.easeOutBack=Ze;exports.easeOutBounce=fe;exports.easeOutCirc=Xe;exports.easeOutCubic=Fe;exports.easeOutElastic=Je;exports.easeOutExpo=qe;exports.easeOutQuad=Ce;exports.easeOutQuart=Qe;exports.easeOutQuint=Ae;exports.easeOutSine=be;exports.isBetween=et;exports.lerp=Me;exports.now=ue;exports.vsfx=pt;exports.wait=it;
