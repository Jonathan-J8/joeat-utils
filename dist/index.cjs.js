"use strict";var ve=Object.defineProperty;var pe=i=>{throw TypeError(i)};var de=(i,t,e)=>t in i?ve(i,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):i[t]=e;var r=(i,t,e)=>de(i,typeof t!="symbol"?t+"":t,e),le=(i,t,e)=>t.has(i)||pe("Cannot "+e);var n=(i,t,e)=>(le(i,t,"read from private field"),e?e.call(i):t.get(i)),m=(i,t,e)=>t.has(i)?pe("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(i):t.set(i,e),a=(i,t,e,s)=>(le(i,t,"write to private field"),s?s.call(i,e):t.set(i,e),e);Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const fe=i=>{const t=e=>{const s=e.target;i&&!i.contains(s)&&!e.defaultPrevented&&i.dispatchEvent(new CustomEvent("clickout",{detail:{node:i}}))};return window.addEventListener("click",t),()=>window.removeEventListener("click",t)},ye=i=>{const t=new i.Mesh(new i.PlaneGeometry(2,2),new i.MeshLambertMaterial({map:i.textureCallback(),side:i.DoubleSide,color:16777215,transparent:!1}));return{mesh:t,update:()=>{t.material.map=i.textureCallback()},dispose:()=>{t.geometry.dispose(),t.material.dispose()}}},we=i=>new i(new Uint8Array(1),1,1),ze=i=>-1*Math.cos(i*(Math.PI/2))+1,Me=i=>Math.sin(i*(Math.PI/2)),ge=i=>-.5*(Math.cos(Math.PI*i)-1),Ie=i=>i*i,Te=i=>i*(2-i),Pe=i=>i<.5?2*i*i:-1+(4-2*i)*i,be=i=>i*i*i,Oe=i=>{const t=i-1;return t*t*t+1},Se=i=>i<.5?4*i*i*i:(i-1)*(2*i-2)*(2*i-2)+1,Ee=i=>i*i*i*i,De=i=>{const t=i-1;return 1-t*t*t*t},Ce=i=>{const t=i-1;return i<.5?8*i*i*i*i:1-8*t*t*t*t},je=i=>i*i*i*i*i,ke=i=>{const t=i-1;return 1+t*t*t*t*t},Ne=i=>{const t=i-1;return i<.5?16*i*i*i*i*i:1+16*t*t*t*t*t},Fe=i=>i===0?0:Math.pow(2,10*(i-1)),Qe=i=>i===1?1:-Math.pow(2,-10*i)+1,Ae=i=>{if(i===0||i===1)return i;const t=i*2,e=t-1;return t<1?.5*Math.pow(2,10*e):.5*(-Math.pow(2,-10*e)+2)},Le=i=>{const t=i/1;return-1*(Math.sqrt(1-t*i)-1)},qe=i=>{const t=i-1;return Math.sqrt(1-t*t)},Be=i=>{const t=i*2,e=t-2;return t<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-e*e)+1)},Re=(i,t=1.70158)=>i*i*((t+1)*i-t),Ye=(i,t=1.70158)=>{const e=i/1-1;return e*e*((t+1)*e+t)+1},Xe=(i,t=1.70158)=>{const e=i*2,s=e-2,o=t*1.525;return e<1?.5*e*e*((o+1)*e-o):.5*(s*s*((o+1)*s+o)+2)},We=(i,t=.7)=>{if(i===0||i===1)return i;const s=i/1-1,o=1-t,c=o/(2*Math.PI)*Math.asin(1);return-(Math.pow(2,10*s)*Math.sin((s-c)*(2*Math.PI)/o))},Ze=(i,t=.7)=>{if(i===0||i===1)return i;const e=1-t,s=i*2,o=e/(2*Math.PI)*Math.asin(1);return Math.pow(2,-10*s)*Math.sin((s-o)*(2*Math.PI)/e)+1},Ve=(i,t=.65)=>{if(i===0||i===1)return i;const e=1-t,s=i*2,o=s-1,c=e/(2*Math.PI)*Math.asin(1);return s<1?-.5*(Math.pow(2,10*o)*Math.sin((o-c)*(2*Math.PI)/e)):Math.pow(2,-10*o)*Math.sin((o-c)*(2*Math.PI)/e)*.5+1},ce=i=>{const t=i/1;if(t<1/2.75)return 7.5625*t*t;if(t<2/2.75){const e=t-.5454545454545454;return 7.5625*e*e+.75}else if(t<2.5/2.75){const e=t-.8181818181818182;return 7.5625*e*e+.9375}else{const e=t-.9545454545454546;return 7.5625*e*e+.984375}},he=i=>1-ce(1-i),Ge=i=>i<.5?he(i*2)*.5:ce(i*2-1)*.5+.5,K=(i,t,e)=>Math.max(t,Math.min(e,i)),He=(i,t,e)=>i>=t-e&&i<=t+e,xe=(i,t,e)=>(1-e)*i+e*t,k=(i,t,e,s,o=1e-4)=>i<=t+o&&i>=t-o?i:xe(i,t,1-Math.exp(-e*s)),Ue=(i,t,e,s,o=1e-4)=>{i.x=k(i.x,t.x,e,s,o),i.y=k(i.y,t.y,e,s,o),i.x=k(i.x,t.x,e,s,o),i.y=k(i.y,t.y,e,s,o),typeof i.z=="number"&&typeof t.z=="number"&&(i.z=k(i.z,t.z,e,s,o)),typeof i.w=="number"&&typeof t.w=="number"&&(i.w=k(i.w,t.w,e,s,o))},ee=()=>(typeof performance>"u"?Date:performance).now(),Je=i=>new Promise(t=>setTimeout(t,i));var I;class me{constructor(){m(this,I);a(this,I,new Set)}get size(){return n(this,I).size}addListener(...t){for(let e=0,s=t.length;e<s;e++)n(this,I).add(t[e])}removeListener(...t){for(let e=0,s=t.length;e<s;e++)n(this,I).delete(t[e])}fire(...t){n(this,I).forEach(e=>{e(...t)})}clear(){n(this,I).clear()}}I=new WeakMap;const q=i=>i&&i();var N,F,B,Q,R;class Ke extends me{constructor(){super();m(this,N);m(this,F,!0);m(this,B,0);m(this,Q);r(this,"uniforms",Object.freeze({uTime:{value:0},uDeltaTime:{value:0},uDeltaMs:{value:0}}));m(this,R,e=>{const{uTime:s,uDeltaTime:o,uDeltaMs:c}=this.uniforms;s.value=e,c.value=Math.abs(e-n(this,B)),o.value=c.value*.001,a(this,B,e),super.fire({time:e,deltaTime:o.value,deltaMs:c.value}),!n(this,Q)&&a(this,N,requestAnimationFrame(n(this,R)))});r(this,"play",e=>{a(this,Q,e),n(this,F)&&(a(this,F,!1),a(this,B,ee()),e?e.setAnimationLoop(n(this,R)):a(this,N,requestAnimationFrame(n(this,R))))});r(this,"pause",e=>{a(this,F,!0),e?e.setAnimationLoop(null):typeof n(this,N)=="number"&&cancelAnimationFrame(n(this,N))});r(this,"debug",e=>{e.add({paused:this.paused},"paused").onChange(s=>{s?this.pause(n(this,Q)):this.play(n(this,Q))})});r(this,"interpolate",({from:e=0,to:s=1,onStart:o,onUpdate:c,onComplete:l})=>{const d=Math.abs(e),y=Math.abs(s),p=e<s?1:-1;let u=d;const w=v=>{u+=v.deltaTime,u=K(u,d,y),typeof c=="function"&&c({value:u*p,...v}),u===y&&(typeof l=="function"&&l({value:u*p,...v}),this.removeListener(w))},{uDeltaMs:z,uDeltaTime:f,uTime:x}=this.uniforms;typeof o=="function"&&o({value:e,time:x.value,deltaTime:f.value,deltaMs:z.value}),this.addListener(w)});r(this,"animate",({steps:e=0,duration:s=400,delay:o=0,iterations:c=0,onStart:l,onUpdate:d,onComplete:y})=>{let p,u=0,w=0,z=0;const f=({time:v})=>{const $=Math.abs(v-u);if(e>0){const ue=Math.min(Math.floor($/s*e),e-1);ue!==w&&(w=ue,q(d))}else q(d);$>=s&&(this.removeListener(f),q(d),q(y),z++,(c<0||c===1/0||z<c)&&(typeof p=="number"&&clearTimeout(p),o>0?p=setTimeout(()=>{u=ee(),q(l),this.addListener(f)},o):x()))},x=()=>{u=ee(),q(l),this.addListener(f)};return typeof p=="number"&&clearTimeout(p),o>0?p=setTimeout(x,o):x(),()=>this.removeListener(f)})}get paused(){return n(this,F)}}N=new WeakMap,F=new WeakMap,B=new WeakMap,Q=new WeakMap,R=new WeakMap;class _e{constructor({camera:t,controls:e,Vector3:s}){r(this,"uniforms");r(this,"direction");r(this,"instance");r(this,"controls");r(this,"resize",({width:t,height:e})=>{const{instance:s}=this;s!=null&&s.aspect&&(s.aspect=t/e),this.instance.updateProjectionMatrix()});r(this,"update",({deltaTime:t})=>{this.instance.getWorldDirection(this.uniforms.uDirection.value),this.controls&&this.controls.update(t)});r(this,"clear",()=>{const{controls:t,instance:e}=this;e.clear(),t&&(t.disconnect(),t.dispose())});r(this,"debug",t=>{const{instance:e,controls:s,direction:o}=this;s&&t.add(s,"enabled").name("camera controls"),t.add(e.position,"x").name("camera position x").listen(),t.add(e.position,"y").name("camera position y").listen(),t.add(e.position,"z").name("camera position z").listen(),o&&(t.add(o,"x").name("camera direction x").onChange(()=>{e.lookAt(o)}).listen(),t.add(o,"y").name("camera direction y").onChange(()=>{e.lookAt(o)}).listen(),t.add(o,"z").name("camera direction z").onChange(()=>{e.lookAt(o)}).listen())});this.uniforms=Object.freeze({uDirection:{value:new s}}),this.instance=t,this.controls=e,this.controls&&this.controls.addEventListener("change",()=>{const{uDirection:o}=this.uniforms;this.instance.getWorldDirection(o.value)})}}var _,Y,X,W,A,Z,V,G,te,ie,se,ne,oe;class $e{constructor({Plane:t,Raycaster:e,Vector2:s,Vector3:o,camera:c}){r(this,"uniforms");m(this,_);m(this,Y);m(this,X);m(this,W);m(this,A);m(this,Z);m(this,V);m(this,G);m(this,te,t=>{const{uScroll:e,uScrollVelocity:s}=this.uniforms;n(this,W).copy(e.value);const o=window.scrollX/(document.body.scrollWidth-window.innerWidth),c=window.scrollY/(document.body.scrollHeight-window.innerHeight);e.value.x=o,e.value.y=c,t.type==="scroll"?s.value.subVectors(e.value,n(this,W)):s.value.set(0,0)});m(this,ie,t=>{const{uMousePosition:e,uElementSize:s}=this.uniforms,o=s.value.x,c=s.value.y;e.value.x=t.clientX/o*2-1,e.value.y=-(t.clientY/c)*2+1});m(this,se,t=>{const{uMousePress:e}=this.uniforms;t.pointerType==="mouse"?e.value=t.pressure?1:0:e.value=t.pressure});m(this,ne,t=>{const{uMouseVelocity:e}=this.uniforms,s=t.pageX,o=t.pageY,c=n(this,A).x,l=n(this,A).y;e.value.x=Math.abs(s-c)*.16,e.value.y=Math.abs(o-l)*.16,n(this,A).set(s,o),typeof n(this,Z)=="number"&&clearTimeout(n(this,Z)),a(this,Z,setTimeout(()=>{e.value.set(0,0)},200))});m(this,oe,()=>{const{uMouseWorldPosition:t,uMousePosition:e}=this.uniforms;n(this,V).getWorldDirection(n(this,G)),n(this,X).setFromCamera(e.value,n(this,V)),n(this,Y).setFromNormalAndCoplanarPoint(n(this,G),n(this,_)),n(this,X).ray.intersectPlane(n(this,Y),t.value)});r(this,"onResize",({width:t,height:e})=>{this.uniforms.uElementSize.value.set(t,e)});r(this,"onMove",t=>{n(this,ie).call(this,t),n(this,oe).call(this),n(this,ne).call(this,t)});r(this,"onPress",t=>{n(this,se).call(this,t)});r(this,"onScroll",t=>{n(this,te).call(this,t)});this.uniforms=Object.freeze({uElementSize:{value:new s},uScroll:{value:new s},uScrollVelocity:{value:new s},uMousePress:{value:0},uMousePosition:{value:new s},uMouseWorldPosition:{value:new o},uMouseVelocity:{value:new s}}),a(this,_,new o),a(this,Y,new t),a(this,X,new e),a(this,W,new s),a(this,A,new s),a(this,V,c),a(this,G,new o)}}_=new WeakMap,Y=new WeakMap,X=new WeakMap,W=new WeakMap,A=new WeakMap,Z=new WeakMap,V=new WeakMap,G=new WeakMap,te=new WeakMap,ie=new WeakMap,se=new WeakMap,ne=new WeakMap,oe=new WeakMap;const et=function(i,t,e,s){const o=function(c,l,d){var u,w;const y=(u=c.getShaderInfoLog(l))==null?void 0:u.trim(),p="Errors in "+d+`:

`+y;if(y!==""){const z=(w=c.getShaderSource(l))==null?void 0:w.replace(/\t/g,"  "),f=z==null?void 0:z.split(`
`);let x="",v=1;if(!f)return;for(const $ of f)x+=(v<10?" ":"")+v+":		"+$+`
`,v++;console.error(p+`
`+x)}};o(i,e,"Vertex Shader"),o(i,s,"Fragment Shader")};class tt{constructor({renderer:t,Vector2:e,EffectComposer:s}){r(this,"uniforms");r(this,"instance");r(this,"composer");r(this,"addEffect",t=>{!this.composer||!this.instance||this.composer.addPass(t)});r(this,"removeEffect",(...t)=>{t.forEach(e=>{var s;e.dispose(),(s=this.composer)==null||s.removePass(e)})});r(this,"update",(t,e,s=.16)=>{this.instance&&(this.composer?this.composer.render(s):this.instance.render(t,e))});r(this,"resize",t=>{const{width:e,height:s,pixelRatio:o}=t;this.instance&&(console.log(e,s,o),this.instance.setSize(e,s,!1),this.uniforms.uResolution.value.set(e,s),this.instance.setPixelRatio(o),this.composer&&this.composer.setSize(e,s))});r(this,"clear",()=>{this.instance&&this.instance.dispose(),this.composer&&this.removeEffect(...this.composer.passes)});r(this,"debug",t=>{const{instance:e}=this;e&&(e.debug.checkShaderErrors=!0,e.debug.onShaderError=et,t.add(e,"toneMapping",{NoToneMapping:0,LinearToneMapping:1,ReinhardToneMapping:2,CineonToneMapping:3,ACESFilmicToneMapping:4,CustomToneMapping:5,AgXToneMapping:6,NeutralToneMapping:7}).name("tone mapping"),t.add(e,"toneMappingExposure",0,1).name("tone mapping exposure"))});this.uniforms=Object.freeze({uResolution:{value:new e}}),this.instance=t,this.instance.debug.checkShaderErrors=!1,s&&(this.composer=new s(this.instance))}}var T,E,D,H,P,C,U;class it extends me{constructor(e){super();m(this,T,7680);m(this,E,100);m(this,D,100);m(this,H,1);m(this,P,1);m(this,C);r(this,"fire",()=>{let e=n(this,E),s=n(this,D);const o=n(this,H);if(n(this,E)>n(this,T)||n(this,D)>n(this,T))if(e>s){const c=s/e;e=K(e,0,n(this,T)),s=e*c}else{const c=e/s;s=K(s,0,n(this,T)),e=s*c}e*=n(this,P),s*=n(this,P),super.fire({width:e,height:s,pixelRatio:o})});m(this,U,new ResizeObserver(e=>{const s=e[0].contentBoxSize[0],{inlineSize:o,blockSize:c}=s;n(this,E)===o&&n(this,D)===c||(a(this,E,o),a(this,D,c),this.fire())}));r(this,"debug",e=>{e.add({maxSize:this.maxSize},"maxSize",0,7680).name("max resolution"),e.add({resolutionFactor:this.resolutionFactor},"resolutionFactor",0,1).name("resolution factor")});a(this,H,Math.min(window.devicePixelRatio,2)),a(this,C,e),n(this,U).observe(n(this,C)),this.fire()}get width(){return n(this,E)*n(this,P)}get height(){return n(this,D)*n(this,P)}get element(){return n(this,C)}get pixelRatio(){return n(this,H)}get maxSize(){return n(this,T)}get resolutionFactor(){return n(this,P)}set resolutionFactor(e){a(this,P,K(e,.01,1)),this.fire()}set maxSize(e){a(this,T,e<32?32:e),this.fire()}clear(){super.clear(),n(this,C)&&n(this,U).unobserve(n(this,C)),n(this,U).disconnect()}}T=new WeakMap,E=new WeakMap,D=new WeakMap,H=new WeakMap,P=new WeakMap,C=new WeakMap,U=new WeakMap;const S=class S{constructor({scene:t}){r(this,"instance");r(this,"dispose",()=>{this.instance.children.forEach(t=>S.disposeNode(t)),this.instance.clear()});this.instance=t}};r(S,"disposeMaterial",t=>{Object.values(t).forEach(e=>{typeof(e==null?void 0:e.dispose)=="function"&&e.dispose()})}),r(S,"disposeNode",t=>{if(!t)return;const e=t;e!=null&&e.geometry&&e.geometry.dispose(),e!=null&&e.material&&(Array.isArray(e.material)?e.material.forEach(s=>{S.disposeMaterial(s),s.dispose()}):(S.disposeMaterial(e.material),e.material.dispose())),e.children.forEach(s=>S.disposeNode(s))});let ae=S;var M,b,J,h,L,O;class st{constructor(t,e){m(this,M,{mass:.5,tension:.5,friction:.5,threshold:.1,onUpdate:void 0,onComplete:void 0});m(this,b,0);m(this,J,0);m(this,h,0);m(this,L,0);m(this,O,!1);r(this,"from",t=>(a(this,J,t),a(this,h,t),this));r(this,"to",(t,e)=>(a(this,b,t),Math.abs(n(this,L))<n(this,M).threshold&&Math.abs(n(this,b)-n(this,h))<n(this,M).threshold?this:(e&&a(this,M,{...n(this,M),...e}),a(this,O,!1),this)));r(this,"update",(t=.016)=>{if(n(this,O))return;const{mass:e,tension:s,friction:o,threshold:c,onComplete:l,onUpdate:d}=n(this,M),y=Math.min(t,.06),p=n(this,L)??0,u=typeof n(this,h)=="number"?n(this,h):n(this,J),w=-1*s*(u-n(this,b)),z=-1*p*o,f=(w+z)/e,x=p+f*y,v=u+x*y;a(this,O,Math.abs(x)<c&&Math.abs(v-n(this,b))<c),a(this,h,n(this,O)?n(this,b):v),a(this,L,x),n(this,O)?(a(this,h,n(this,b)),l&&l(n(this,h))):d&&d(n(this,h))});a(this,h,t||0),a(this,J,t||0),a(this,M,{...n(this,M),...e})}get value(){return n(this,h)}get velocity(){return n(this,L)}get finished(){return n(this,O)}}M=new WeakMap,b=new WeakMap,J=new WeakMap,h=new WeakMap,L=new WeakMap,O=new WeakMap;var j,g,re;class nt{constructor(){m(this,j,[]);m(this,g,!1);m(this,re,async()=>{if(!n(this,g)){for(a(this,g,!0);n(this,j).length>0&&n(this,g);){const t=n(this,j).shift();if(t)try{await t()}catch(e){console.error("Timeline error:",e)}}a(this,g,!1)}});r(this,"add",(...t)=>{n(this,j).push(...t)});r(this,"play",async()=>{a(this,g,!1),await n(this,re).call(this)});r(this,"stop",()=>{a(this,g,!1)});r(this,"clear",()=>{this.stop(),a(this,j,[])})}get isPlaying(){return n(this,g)}get size(){return n(this,j).length}}j=new WeakMap,g=new WeakMap,re=new WeakMap;var ot=`vec4 mod289(vec4 x){return x-floor(x*(1.0/289.0))*289.0;}float mod289(float x){return x-floor(x*(1.0/289.0))*289.0;}vec4 permute(vec4 x){return mod289(((x*34.0)+1.0)*x);}float permute(float x){return mod289(((x*34.0)+1.0)*x);}vec4 taylorInvSqrt(vec4 r){return 1.79284291400159-0.85373472095314*r;}float taylorInvSqrt(float r){return 1.79284291400159-0.85373472095314*r;}vec4 grad4(float j,vec4 ip){const vec4 ones=vec4(1.0,1.0,1.0,-1.0);vec4 p,s;p.xyz=floor(fract(vec3(j)*ip.xyz)*7.0)*ip.z-1.0;p.w=1.5-dot(abs(p.xyz),ones.xyz);s=vec4(lessThan(p,vec4(0.0)));p.xyz=p.xyz+(s.xyz*2.0-1.0)*s.www;return p;}
#define F4 0.309016994374947451
vec4 simplexNoiseDerivatives(vec4 v){const vec4 C=vec4(0.138196601125011,0.276393202250021,0.414589803375032,-0.447213595499958);vec4 i=floor(v+dot(v,vec4(F4)));vec4 x0=v-i+dot(i,C.xxxx);vec4 i0;vec3 isX=step(x0.yzw,x0.xxx);vec3 isYZ=step(x0.zww,x0.yyz);i0.x=isX.x+isX.y+isX.z;i0.yzw=1.0-isX;i0.y+=isYZ.x+isYZ.y;i0.zw+=1.0-isYZ.xy;i0.z+=isYZ.z;i0.w+=1.0-isYZ.z;vec4 i3=clamp(i0,0.0,1.0);vec4 i2=clamp(i0-1.0,0.0,1.0);vec4 i1=clamp(i0-2.0,0.0,1.0);vec4 x1=x0-i1+C.xxxx;vec4 x2=x0-i2+C.yyyy;vec4 x3=x0-i3+C.zzzz;vec4 x4=x0+C.wwww;i=mod289(i);float j0=permute(permute(permute(permute(i.w)+i.z)+i.y)+i.x);vec4 j1=permute(permute(permute(permute(i.w+vec4(i1.w,i2.w,i3.w,1.0))+i.z+vec4(i1.z,i2.z,i3.z,1.0))+i.y+vec4(i1.y,i2.y,i3.y,1.0))+i.x+vec4(i1.x,i2.x,i3.x,1.0));vec4 ip=vec4(1.0/294.0,1.0/49.0,1.0/7.0,0.0);vec4 p0=grad4(j0,ip);vec4 p1=grad4(j1.x,ip);vec4 p2=grad4(j1.y,ip);vec4 p3=grad4(j1.z,ip);vec4 p4=grad4(j1.w,ip);vec4 norm=taylorInvSqrt(vec4(dot(p0,p0),dot(p1,p1),dot(p2,p2),dot(p3,p3)));p0*=norm.x;p1*=norm.y;p2*=norm.z;p3*=norm.w;p4*=taylorInvSqrt(dot(p4,p4));vec3 values0=vec3(dot(p0,x0),dot(p1,x1),dot(p2,x2));vec2 values1=vec2(dot(p3,x3),dot(p4,x4));vec3 m0=max(0.5-vec3(dot(x0,x0),dot(x1,x1),dot(x2,x2)),0.0);vec2 m1=max(0.5-vec2(dot(x3,x3),dot(x4,x4)),0.0);vec3 temp0=-6.0*m0*m0*values0;vec2 temp1=-6.0*m1*m1*values1;vec3 mmm0=m0*m0*m0;vec2 mmm1=m1*m1*m1;float dx=temp0[0]*x0.x+temp0[1]*x1.x+temp0[2]*x2.x+temp1[0]*x3.x+temp1[1]*x4.x+mmm0[0]*p0.x+mmm0[1]*p1.x+mmm0[2]*p2.x+mmm1[0]*p3.x+mmm1[1]*p4.x;float dy=temp0[0]*x0.y+temp0[1]*x1.y+temp0[2]*x2.y+temp1[0]*x3.y+temp1[1]*x4.y+mmm0[0]*p0.y+mmm0[1]*p1.y+mmm0[2]*p2.y+mmm1[0]*p3.y+mmm1[1]*p4.y;float dz=temp0[0]*x0.z+temp0[1]*x1.z+temp0[2]*x2.z+temp1[0]*x3.z+temp1[1]*x4.z+mmm0[0]*p0.z+mmm0[1]*p1.z+mmm0[2]*p2.z+mmm1[0]*p3.z+mmm1[1]*p4.z;float dw=temp0[0]*x0.w+temp0[1]*x1.w+temp0[2]*x2.w+temp1[0]*x3.w+temp1[1]*x4.w+mmm0[0]*p0.w+mmm0[1]*p1.w+mmm0[2]*p2.w+mmm1[0]*p3.w+mmm1[1]*p4.w;return vec4(dx,dy,dz,dw)*49.0;}vec3 curl(in vec3 p,in float noiseTime,in float persistence){vec4 xNoisePotentialDerivatives=vec4(0.0);vec4 yNoisePotentialDerivatives=vec4(0.0);vec4 zNoisePotentialDerivatives=vec4(0.0);for(int i=0;i<3;++i){float twoPowI=pow(2.0,float(i));float scale=0.5*twoPowI*pow(persistence,float(i));xNoisePotentialDerivatives+=simplexNoiseDerivatives(vec4(p*twoPowI,noiseTime))*scale;yNoisePotentialDerivatives+=simplexNoiseDerivatives(vec4((p+vec3(123.4,129845.6,-1239.1))*twoPowI,noiseTime))*scale;zNoisePotentialDerivatives+=simplexNoiseDerivatives(vec4((p+vec3(-9519.0,9051.0,-123.0))*twoPowI,noiseTime))*scale;}return vec3(zNoisePotentialDerivatives[1]-yNoisePotentialDerivatives[2],xNoisePotentialDerivatives[2]-zNoisePotentialDerivatives[0],yNoisePotentialDerivatives[0]-xNoisePotentialDerivatives[1]);}`,rt=`vec4 mod289(vec4 x){return x-floor(x*(1.0/289.0))*289.0;}float mod289(float x){return x-floor(x*(1.0/289.0))*289.0;}vec4 permute(vec4 x){return mod289(((x*34.0)+1.0)*x);}float permute(float x){return mod289(((x*34.0)+1.0)*x);}vec4 taylorInvSqrt(vec4 r){return 1.79284291400159-0.85373472095314*r;}float taylorInvSqrt(float r){return 1.79284291400159-0.85373472095314*r;}vec4 grad4(float j,vec4 ip){const vec4 ones=vec4(1.0,1.0,1.0,-1.0);vec4 p,s;p.xyz=floor(fract(vec3(j)*ip.xyz)*7.0)*ip.z-1.0;p.w=1.5-dot(abs(p.xyz),ones.xyz);s=vec4(lessThan(p,vec4(0.0)));p.xyz=p.xyz+(s.xyz*2.0-1.0)*s.www;return p;}
#define F4 0.309016994374947451
vec4 simplexNoiseDerivatives(vec4 v){const vec4 C=vec4(0.138196601125011,0.276393202250021,0.414589803375032,-0.447213595499958);vec4 i=floor(v+dot(v,vec4(F4)));vec4 x0=v-i+dot(i,C.xxxx);vec4 i0;vec3 isX=step(x0.yzw,x0.xxx);vec3 isYZ=step(x0.zww,x0.yyz);i0.x=isX.x+isX.y+isX.z;i0.yzw=1.0-isX;i0.y+=isYZ.x+isYZ.y;i0.zw+=1.0-isYZ.xy;i0.z+=isYZ.z;i0.w+=1.0-isYZ.z;vec4 i3=clamp(i0,0.0,1.0);vec4 i2=clamp(i0-1.0,0.0,1.0);vec4 i1=clamp(i0-2.0,0.0,1.0);vec4 x1=x0-i1+C.xxxx;vec4 x2=x0-i2+C.yyyy;vec4 x3=x0-i3+C.zzzz;vec4 x4=x0+C.wwww;i=mod289(i);float j0=permute(permute(permute(permute(i.w)+i.z)+i.y)+i.x);vec4 j1=permute(permute(permute(permute(i.w+vec4(i1.w,i2.w,i3.w,1.0))+i.z+vec4(i1.z,i2.z,i3.z,1.0))+i.y+vec4(i1.y,i2.y,i3.y,1.0))+i.x+vec4(i1.x,i2.x,i3.x,1.0));vec4 ip=vec4(1.0/294.0,1.0/49.0,1.0/7.0,0.0);vec4 p0=grad4(j0,ip);vec4 p1=grad4(j1.x,ip);vec4 p2=grad4(j1.y,ip);vec4 p3=grad4(j1.z,ip);vec4 p4=grad4(j1.w,ip);vec4 norm=taylorInvSqrt(vec4(dot(p0,p0),dot(p1,p1),dot(p2,p2),dot(p3,p3)));p0*=norm.x;p1*=norm.y;p2*=norm.z;p3*=norm.w;p4*=taylorInvSqrt(dot(p4,p4));vec3 values0=vec3(dot(p0,x0),dot(p1,x1),dot(p2,x2));vec2 values1=vec2(dot(p3,x3),dot(p4,x4));vec3 m0=max(0.5-vec3(dot(x0,x0),dot(x1,x1),dot(x2,x2)),0.0);vec2 m1=max(0.5-vec2(dot(x3,x3),dot(x4,x4)),0.0);vec3 temp0=-6.0*m0*m0*values0;vec2 temp1=-6.0*m1*m1*values1;vec3 mmm0=m0*m0*m0;vec2 mmm1=m1*m1*m1;float dx=temp0[0]*x0.x+temp0[1]*x1.x+temp0[2]*x2.x+temp1[0]*x3.x+temp1[1]*x4.x+mmm0[0]*p0.x+mmm0[1]*p1.x+mmm0[2]*p2.x+mmm1[0]*p3.x+mmm1[1]*p4.x;float dy=temp0[0]*x0.y+temp0[1]*x1.y+temp0[2]*x2.y+temp1[0]*x3.y+temp1[1]*x4.y+mmm0[0]*p0.y+mmm0[1]*p1.y+mmm0[2]*p2.y+mmm1[0]*p3.y+mmm1[1]*p4.y;float dz=temp0[0]*x0.z+temp0[1]*x1.z+temp0[2]*x2.z+temp1[0]*x3.z+temp1[1]*x4.z+mmm0[0]*p0.z+mmm0[1]*p1.z+mmm0[2]*p2.z+mmm1[0]*p3.z+mmm1[1]*p4.z;float dw=temp0[0]*x0.w+temp0[1]*x1.w+temp0[2]*x2.w+temp1[0]*x3.w+temp1[1]*x4.w+mmm0[0]*p0.w+mmm0[1]*p1.w+mmm0[2]*p2.w+mmm1[0]*p3.w+mmm1[1]*p4.w;return vec4(dx,dy,dz,dw)*49.0;}`,at="varying vec2 vUv;void main(){vUv=uv;gl_Position=projectionMatrix*modelViewMatrix*vec4(position,1.);}";exports.Animator=Ke;exports.CameraWrapper=_e;exports.MonoEventEmitter=me;exports.MousePointer=$e;exports.RendererWrapper=tt;exports.Resizer=it;exports.SceneWrapper=ae;exports.Spring=st;exports.TaskQueue=nt;exports.clamp=K;exports.clickout=fe;exports.createDebugTexture=ye;exports.createEmpytTexture=we;exports.curl=ot;exports.dampThreshold=k;exports.dampThresholdVec=Ue;exports.easeInBack=Re;exports.easeInBounce=he;exports.easeInCirc=Le;exports.easeInCubic=be;exports.easeInElastic=We;exports.easeInExpo=Fe;exports.easeInOutBack=Xe;exports.easeInOutBounce=Ge;exports.easeInOutCirc=Be;exports.easeInOutCubic=Se;exports.easeInOutElastic=Ve;exports.easeInOutExpo=Ae;exports.easeInOutQuad=Pe;exports.easeInOutQuart=Ce;exports.easeInOutQuint=Ne;exports.easeInOutSine=ge;exports.easeInQuad=Ie;exports.easeInQuart=Ee;exports.easeInQuint=je;exports.easeInSine=ze;exports.easeOutBack=Ye;exports.easeOutBounce=ce;exports.easeOutCirc=qe;exports.easeOutCubic=Oe;exports.easeOutElastic=Ze;exports.easeOutExpo=Qe;exports.easeOutQuad=Te;exports.easeOutQuart=De;exports.easeOutQuint=ke;exports.easeOutSine=Me;exports.isBetween=He;exports.lerp=xe;exports.now=ee;exports.simplexNoiseDerivatives=rt;exports.vsfx=at;exports.wait=Je;
