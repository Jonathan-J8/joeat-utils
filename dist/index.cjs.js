"use strict";var ve=Object.defineProperty;var pe=i=>{throw TypeError(i)};var de=(i,e,t)=>e in i?ve(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t;var r=(i,e,t)=>de(i,typeof e!="symbol"?e+"":e,t),le=(i,e,t)=>e.has(i)||pe("Cannot "+t);var n=(i,e,t)=>(le(i,e,"read from private field"),t?t.call(i):e.get(i)),m=(i,e,t)=>e.has(i)?pe("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(i):e.set(i,t),a=(i,e,t,s)=>(le(i,e,"write to private field"),s?s.call(i,t):e.set(i,t),t);Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const fe=i=>{const e=t=>{const s=t.target;i&&!i.contains(s)&&!t.defaultPrevented&&i.dispatchEvent(new CustomEvent("clickout",{detail:{node:i}}))};return window.addEventListener("click",e),()=>window.removeEventListener("click",e)},ye=i=>{const e=new i.Mesh(new i.PlaneGeometry(2,2),new i.MeshLambertMaterial({map:i.textureCallback(),side:i.DoubleSide,color:16777215,transparent:!1}));return{mesh:e,update:()=>{e.material.map=i.textureCallback()},dispose:()=>{e.geometry.dispose(),e.material.dispose()}}},we=i=>new i(new Uint8Array(1),1,1),ze=i=>-1*Math.cos(i*(Math.PI/2))+1,Me=i=>Math.sin(i*(Math.PI/2)),ge=i=>-.5*(Math.cos(Math.PI*i)-1),Ie=i=>i*i,Te=i=>i*(2-i),Pe=i=>i<.5?2*i*i:-1+(4-2*i)*i,be=i=>i*i*i,Oe=i=>{const e=i-1;return e*e*e+1},Se=i=>i<.5?4*i*i*i:(i-1)*(2*i-2)*(2*i-2)+1,Ee=i=>i*i*i*i,De=i=>{const e=i-1;return 1-e*e*e*e},Ce=i=>{const e=i-1;return i<.5?8*i*i*i*i:1-8*e*e*e*e},je=i=>i*i*i*i*i,ke=i=>{const e=i-1;return 1+e*e*e*e*e},Ne=i=>{const e=i-1;return i<.5?16*i*i*i*i*i:1+16*e*e*e*e*e},Fe=i=>i===0?0:Math.pow(2,10*(i-1)),Qe=i=>i===1?1:-Math.pow(2,-10*i)+1,Ae=i=>{if(i===0||i===1)return i;const e=i*2,t=e-1;return e<1?.5*Math.pow(2,10*t):.5*(-Math.pow(2,-10*t)+2)},Le=i=>{const e=i/1;return-1*(Math.sqrt(1-e*i)-1)},qe=i=>{const e=i-1;return Math.sqrt(1-e*e)},Be=i=>{const e=i*2,t=e-2;return e<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-t*t)+1)},Re=(i,e=1.70158)=>i*i*((e+1)*i-e),Ye=(i,e=1.70158)=>{const t=i/1-1;return t*t*((e+1)*t+e)+1},Xe=(i,e=1.70158)=>{const t=i*2,s=t-2,o=e*1.525;return t<1?.5*t*t*((o+1)*t-o):.5*(s*s*((o+1)*s+o)+2)},We=(i,e=.7)=>{if(i===0||i===1)return i;const s=i/1-1,o=1-e,c=o/(2*Math.PI)*Math.asin(1);return-(Math.pow(2,10*s)*Math.sin((s-c)*(2*Math.PI)/o))},Ze=(i,e=.7)=>{if(i===0||i===1)return i;const t=1-e,s=i*2,o=t/(2*Math.PI)*Math.asin(1);return Math.pow(2,-10*s)*Math.sin((s-o)*(2*Math.PI)/t)+1},Ve=(i,e=.65)=>{if(i===0||i===1)return i;const t=1-e,s=i*2,o=s-1,c=t/(2*Math.PI)*Math.asin(1);return s<1?-.5*(Math.pow(2,10*o)*Math.sin((o-c)*(2*Math.PI)/t)):Math.pow(2,-10*o)*Math.sin((o-c)*(2*Math.PI)/t)*.5+1},ce=i=>{const e=i/1;if(e<1/2.75)return 7.5625*e*e;if(e<2/2.75){const t=e-.5454545454545454;return 7.5625*t*t+.75}else if(e<2.5/2.75){const t=e-.8181818181818182;return 7.5625*t*t+.9375}else{const t=e-.9545454545454546;return 7.5625*t*t+.984375}},he=i=>1-ce(1-i),Ge=i=>i<.5?he(i*2)*.5:ce(i*2-1)*.5+.5,K=(i,e,t)=>Math.max(e,Math.min(t,i)),He=(i,e,t)=>i>=e-t&&i<=e+t,xe=(i,e,t)=>(1-t)*i+t*e,k=(i,e,t,s,o=1e-4)=>i<=e+o&&i>=e-o?i:xe(i,e,1-Math.exp(-t*s)),Ue=(i,e,t,s,o=1e-4)=>{i.x=k(i.x,e.x,t,s,o),i.y=k(i.y,e.y,t,s,o),i.x=k(i.x,e.x,t,s,o),i.y=k(i.y,e.y,t,s,o),typeof i.z=="number"&&typeof e.z=="number"&&(i.z=k(i.z,e.z,t,s,o)),typeof i.w=="number"&&typeof e.w=="number"&&(i.w=k(i.w,e.w,t,s,o))},ee=()=>(typeof performance>"u"?Date:performance).now(),Je=i=>new Promise(e=>setTimeout(e,i));var I;class me{constructor(){m(this,I);a(this,I,new Set)}get size(){return n(this,I).size}addListener(...e){for(let t=0,s=e.length;t<s;t++)n(this,I).add(e[t])}removeListener(...e){for(let t=0,s=e.length;t<s;t++)n(this,I).delete(e[t])}fire(...e){n(this,I).forEach(t=>{t(...e)})}clear(){n(this,I).clear()}}I=new WeakMap;const q=i=>i&&i();var N,F,B,Q,R;class Ke extends me{constructor(){super();m(this,N);m(this,F,!0);m(this,B,0);m(this,Q);r(this,"uniforms",Object.freeze({uTime:{value:0},uDeltaTime:{value:0},uDeltaMs:{value:0}}));m(this,R,t=>{const{uTime:s,uDeltaTime:o,uDeltaMs:c}=this.uniforms;s.value=t,c.value=Math.abs(t-n(this,B)),o.value=c.value*.001,a(this,B,t),super.fire({time:t,deltaTime:o.value,deltaMs:c.value}),!n(this,Q)&&a(this,N,requestAnimationFrame(n(this,R)))});r(this,"play",t=>{a(this,Q,t),n(this,F)&&(a(this,F,!1),a(this,B,ee()),t?t.setAnimationLoop(n(this,R)):a(this,N,requestAnimationFrame(n(this,R))))});r(this,"pause",t=>{a(this,F,!0),t?t.setAnimationLoop(null):typeof n(this,N)=="number"&&cancelAnimationFrame(n(this,N))});r(this,"debug",t=>{t.add({paused:this.paused},"paused").onChange(s=>{s?this.pause(n(this,Q)):this.play(n(this,Q))})});r(this,"interpolate",({from:t=0,to:s=1,onStart:o,onUpdate:c,onComplete:l})=>{const d=Math.abs(t),y=Math.abs(s),p=t<s?1:-1;let u=d;const w=v=>{u+=v.deltaTime,u=K(u,d,y),typeof c=="function"&&c({value:u*p,...v}),u===y&&(typeof l=="function"&&l({value:u*p,...v}),this.removeListener(w))},{uDeltaMs:z,uDeltaTime:f,uTime:x}=this.uniforms;typeof o=="function"&&o({value:t,time:x.value,deltaTime:f.value,deltaMs:z.value}),this.addListener(w)});r(this,"animate",({steps:t=0,duration:s=400,delay:o=0,iterations:c=0,onStart:l,onUpdate:d,onComplete:y})=>{let p,u=0,w=0,z=0;const f=({time:v})=>{const $=Math.abs(v-u);if(t>0){const ue=Math.min(Math.floor($/s*t),t-1);ue!==w&&(w=ue,q(d))}else q(d);$>=s&&(this.removeListener(f),q(d),q(y),z++,(c<0||c===1/0||z<c)&&(typeof p=="number"&&clearTimeout(p),o>0?p=setTimeout(()=>{u=ee(),q(l),this.addListener(f)},o):x()))},x=()=>{u=ee(),q(l),this.addListener(f)};return typeof p=="number"&&clearTimeout(p),o>0?p=setTimeout(x,o):x(),()=>this.removeListener(f)})}get paused(){return n(this,F)}}N=new WeakMap,F=new WeakMap,B=new WeakMap,Q=new WeakMap,R=new WeakMap;class _e{constructor({camera:e,controls:t,Vector3:s}){r(this,"uniforms");r(this,"direction");r(this,"instance");r(this,"controls");r(this,"resize",({width:e,height:t})=>{const{instance:s}=this;s!=null&&s.aspect&&(s.aspect=e/t),this.instance.updateProjectionMatrix()});r(this,"update",({deltaTime:e})=>{this.instance.getWorldDirection(this.uniforms.uDirection.value),this.controls&&this.controls.update(e)});r(this,"clear",()=>{const{controls:e,instance:t}=this;t.clear(),e&&(e.disconnect(),e.dispose())});r(this,"debug",e=>{const{instance:t,controls:s,direction:o}=this;s&&e.add(s,"enabled").name("camera controls"),e.add(t.position,"x").name("camera position x").listen(),e.add(t.position,"y").name("camera position y").listen(),e.add(t.position,"z").name("camera position z").listen(),o&&(e.add(o,"x").name("camera direction x").onChange(()=>{t.lookAt(o)}).listen(),e.add(o,"y").name("camera direction y").onChange(()=>{t.lookAt(o)}).listen(),e.add(o,"z").name("camera direction z").onChange(()=>{t.lookAt(o)}).listen())});this.uniforms=Object.freeze({uDirection:{value:new s}}),this.instance=e,this.controls=t,this.controls&&this.controls.addEventListener("change",()=>{const{uDirection:o}=this.uniforms;this.instance.getWorldDirection(o.value)})}}var _,Y,X,W,A,Z,V,G,te,ie,se,ne,oe;class $e{constructor({Plane:e,Raycaster:t,Vector2:s,Vector3:o,camera:c}){r(this,"uniforms");m(this,_);m(this,Y);m(this,X);m(this,W);m(this,A);m(this,Z);m(this,V);m(this,G);m(this,te,e=>{const{uScroll:t,uScrollVelocity:s}=this.uniforms;n(this,W).copy(t.value);const o=window.scrollX/(document.body.scrollWidth-window.innerWidth),c=window.scrollY/(document.body.scrollHeight-window.innerHeight);t.value.x=o,t.value.y=c,e.type==="scroll"?s.value.subVectors(t.value,n(this,W)):s.value.set(0,0)});m(this,ie,e=>{const{uMousePosition:t,uElementSize:s}=this.uniforms,o=s.value.x,c=s.value.y;t.value.x=e.clientX/o*2-1,t.value.y=-(e.clientY/c)*2+1});m(this,se,e=>{const{uMousePress:t}=this.uniforms;e.pointerType==="mouse"?t.value=e.pressure?1:0:t.value=e.pressure});m(this,ne,e=>{const{uMouseVelocity:t}=this.uniforms,s=e.pageX,o=e.pageY,c=n(this,A).x,l=n(this,A).y;t.value.x=Math.abs(s-c)*.16,t.value.y=Math.abs(o-l)*.16,n(this,A).set(s,o),typeof n(this,Z)=="number"&&clearTimeout(n(this,Z)),a(this,Z,setTimeout(()=>{t.value.set(0,0)},200))});m(this,oe,()=>{const{uMouseWorldPosition:e,uMousePosition:t}=this.uniforms;n(this,V).getWorldDirection(n(this,G)),n(this,X).setFromCamera(t.value,n(this,V)),n(this,Y).setFromNormalAndCoplanarPoint(n(this,G),n(this,_)),n(this,X).ray.intersectPlane(n(this,Y),e.value)});r(this,"onResize",({width:e,height:t})=>{this.uniforms.uElementSize.value.set(e,t)});r(this,"onMove",e=>{n(this,ie).call(this,e),n(this,oe).call(this),n(this,ne).call(this,e)});r(this,"onPress",e=>{n(this,se).call(this,e)});r(this,"onScroll",e=>{n(this,te).call(this,e)});this.uniforms=Object.freeze({uElementSize:{value:new s},uScroll:{value:new s},uScrollVelocity:{value:new s},uMousePress:{value:0},uMousePosition:{value:new s},uMouseWorldPosition:{value:new o},uMouseVelocity:{value:new s}}),a(this,_,new o),a(this,Y,new e),a(this,X,new t),a(this,W,new s),a(this,A,new s),a(this,V,c),a(this,G,new o)}}_=new WeakMap,Y=new WeakMap,X=new WeakMap,W=new WeakMap,A=new WeakMap,Z=new WeakMap,V=new WeakMap,G=new WeakMap,te=new WeakMap,ie=new WeakMap,se=new WeakMap,ne=new WeakMap,oe=new WeakMap;const et=function(i,e,t,s){const o=function(c,l,d){var u,w;const y=(u=c.getShaderInfoLog(l))==null?void 0:u.trim(),p="Errors in "+d+`:

`+y;if(y!==""){const z=(w=c.getShaderSource(l))==null?void 0:w.replace(/\t/g,"  "),f=z==null?void 0:z.split(`
`);let x="",v=1;if(!f)return;for(const $ of f)x+=(v<10?" ":"")+v+":		"+$+`
`,v++;console.error(p+`
`+x)}};o(i,t,"Vertex Shader"),o(i,s,"Fragment Shader")};class tt{constructor({renderer:e,Vector2:t,EffectComposer:s}){r(this,"uniforms");r(this,"instance");r(this,"composer");r(this,"addEffect",e=>{!this.composer||!this.instance||this.composer.addPass(e)});r(this,"removeEffect",(...e)=>{e.forEach(t=>{var s;t.dispose(),(s=this.composer)==null||s.removePass(t)})});r(this,"update",(e,t,s=.16)=>{this.instance&&(this.composer?this.composer.render(s):this.instance.render(e,t))});r(this,"resize",e=>{const{width:t,height:s,pixelRatio:o}=e;this.instance&&(this.instance.setSize(t,s,!1),this.uniforms.uResolution.value.set(t,s),this.instance.setPixelRatio(o),this.composer&&this.composer.setSize(t,s))});r(this,"clear",()=>{this.instance&&this.instance.dispose(),this.composer&&this.removeEffect(...this.composer.passes)});r(this,"debug",e=>{const{instance:t}=this;t&&(t.debug.checkShaderErrors=!0,t.debug.onShaderError=et,e.add(t,"toneMapping",{NoToneMapping:0,LinearToneMapping:1,ReinhardToneMapping:2,CineonToneMapping:3,ACESFilmicToneMapping:4,CustomToneMapping:5,AgXToneMapping:6,NeutralToneMapping:7}).name("tone mapping"),e.add(t,"toneMappingExposure",0,1).name("tone mapping exposure"))});this.uniforms=Object.freeze({uResolution:{value:new t}}),this.instance=e,this.instance.debug.checkShaderErrors=!1,s&&(this.composer=new s(this.instance))}}var T,E,D,H,P,C,U;class it extends me{constructor(t){super();m(this,T,7680);m(this,E,100);m(this,D,100);m(this,H,1);m(this,P,1);m(this,C);r(this,"fire",()=>{let t=n(this,E),s=n(this,D);const o=n(this,H);if(n(this,E)>n(this,T)||n(this,D)>n(this,T))if(t>s){const c=s/t;t=K(t,0,n(this,T)),s=t*c}else{const c=t/s;s=K(s,0,n(this,T)),t=s*c}t*=n(this,P),s*=n(this,P),super.fire({width:t,height:s,pixelRatio:o})});m(this,U,new ResizeObserver(t=>{const s=t[0].contentBoxSize[0],{inlineSize:o,blockSize:c}=s;n(this,E)===o&&n(this,D)===c||(a(this,E,o),a(this,D,c),this.fire())}));r(this,"debug",t=>{t.add({maxSize:this.maxSize},"maxSize",0,7680).name("max resolution"),t.add({resolutionFactor:this.resolutionFactor},"resolutionFactor",0,1).name("resolution factor")});a(this,H,Math.min(window.devicePixelRatio,2)),a(this,C,t),n(this,U).observe(n(this,C)),this.fire()}get width(){return n(this,E)*n(this,P)}get height(){return n(this,D)*n(this,P)}get element(){return n(this,C)}get pixelRatio(){return n(this,H)}get maxSize(){return n(this,T)}get resolutionFactor(){return n(this,P)}set resolutionFactor(t){a(this,P,K(t,.01,1)),this.fire()}set maxSize(t){a(this,T,t<32?32:t),this.fire()}clear(){super.clear(),n(this,C)&&n(this,U).unobserve(n(this,C)),n(this,U).disconnect()}}T=new WeakMap,E=new WeakMap,D=new WeakMap,H=new WeakMap,P=new WeakMap,C=new WeakMap,U=new WeakMap;const S=class S{constructor({scene:e}){r(this,"instance");r(this,"dispose",()=>{this.instance.children.forEach(e=>S.disposeNode(e)),this.instance.clear()});this.instance=e}};r(S,"disposeMaterial",e=>{Object.values(e).forEach(t=>{typeof(t==null?void 0:t.dispose)=="function"&&t.dispose()})}),r(S,"disposeNode",e=>{if(!e)return;const t=e;t!=null&&t.geometry&&t.geometry.dispose(),t!=null&&t.material&&(Array.isArray(t.material)?t.material.forEach(s=>{S.disposeMaterial(s),s.dispose()}):(S.disposeMaterial(t.material),t.material.dispose())),t.children.forEach(s=>S.disposeNode(s))});let ae=S;var M,b,J,h,L,O;class st{constructor(e,t){m(this,M,{mass:.5,tension:.5,friction:.5,threshold:.1,onUpdate:void 0,onComplete:void 0});m(this,b,0);m(this,J,0);m(this,h,0);m(this,L,0);m(this,O,!1);r(this,"from",e=>(a(this,J,e),a(this,h,e),this));r(this,"to",(e,t)=>(a(this,b,e),Math.abs(n(this,L))<n(this,M).threshold&&Math.abs(n(this,b)-n(this,h))<n(this,M).threshold?this:(t&&a(this,M,{...n(this,M),...t}),a(this,O,!1),this)));r(this,"update",(e=.016)=>{if(n(this,O))return;const{mass:t,tension:s,friction:o,threshold:c,onComplete:l,onUpdate:d}=n(this,M),y=Math.min(e,.06),p=n(this,L)??0,u=typeof n(this,h)=="number"?n(this,h):n(this,J),w=-1*s*(u-n(this,b)),z=-1*p*o,f=(w+z)/t,x=p+f*y,v=u+x*y;a(this,O,Math.abs(x)<c&&Math.abs(v-n(this,b))<c),a(this,h,n(this,O)?n(this,b):v),a(this,L,x),n(this,O)?(a(this,h,n(this,b)),l&&l(n(this,h))):d&&d(n(this,h))});a(this,h,e||0),a(this,J,e||0),a(this,M,{...n(this,M),...t})}get value(){return n(this,h)}get velocity(){return n(this,L)}get finished(){return n(this,O)}}M=new WeakMap,b=new WeakMap,J=new WeakMap,h=new WeakMap,L=new WeakMap,O=new WeakMap;var j,g,re;class nt{constructor(){m(this,j,[]);m(this,g,!1);m(this,re,async()=>{if(!n(this,g)){for(a(this,g,!0);n(this,j).length>0&&n(this,g);){const e=n(this,j).shift();if(e)try{await e()}catch(t){console.error("Timeline error:",t)}}a(this,g,!1)}});r(this,"add",(...e)=>{n(this,j).push(...e)});r(this,"play",async()=>{a(this,g,!1),await n(this,re).call(this)});r(this,"stop",()=>{a(this,g,!1)});r(this,"clear",()=>{this.stop(),a(this,j,[])})}get isPlaying(){return n(this,g)}get size(){return n(this,j).length}}j=new WeakMap,g=new WeakMap,re=new WeakMap;var ot=`vec4 mod289(vec4 x){return x-floor(x*(1.0/289.0))*289.0;}float mod289(float x){return x-floor(x*(1.0/289.0))*289.0;}vec4 permute(vec4 x){return mod289(((x*34.0)+1.0)*x);}float permute(float x){return mod289(((x*34.0)+1.0)*x);}vec4 taylorInvSqrt(vec4 r){return 1.79284291400159-0.85373472095314*r;}float taylorInvSqrt(float r){return 1.79284291400159-0.85373472095314*r;}vec4 grad4(float j,vec4 ip){const vec4 ones=vec4(1.0,1.0,1.0,-1.0);vec4 p,s;p.xyz=floor(fract(vec3(j)*ip.xyz)*7.0)*ip.z-1.0;p.w=1.5-dot(abs(p.xyz),ones.xyz);s=vec4(lessThan(p,vec4(0.0)));p.xyz=p.xyz+(s.xyz*2.0-1.0)*s.www;return p;}
#define F4 0.309016994374947451
vec4 simplexNoiseDerivatives(vec4 v){const vec4 C=vec4(0.138196601125011,0.276393202250021,0.414589803375032,-0.447213595499958);vec4 i=floor(v+dot(v,vec4(F4)));vec4 x0=v-i+dot(i,C.xxxx);vec4 i0;vec3 isX=step(x0.yzw,x0.xxx);vec3 isYZ=step(x0.zww,x0.yyz);i0.x=isX.x+isX.y+isX.z;i0.yzw=1.0-isX;i0.y+=isYZ.x+isYZ.y;i0.zw+=1.0-isYZ.xy;i0.z+=isYZ.z;i0.w+=1.0-isYZ.z;vec4 i3=clamp(i0,0.0,1.0);vec4 i2=clamp(i0-1.0,0.0,1.0);vec4 i1=clamp(i0-2.0,0.0,1.0);vec4 x1=x0-i1+C.xxxx;vec4 x2=x0-i2+C.yyyy;vec4 x3=x0-i3+C.zzzz;vec4 x4=x0+C.wwww;i=mod289(i);float j0=permute(permute(permute(permute(i.w)+i.z)+i.y)+i.x);vec4 j1=permute(permute(permute(permute(i.w+vec4(i1.w,i2.w,i3.w,1.0))+i.z+vec4(i1.z,i2.z,i3.z,1.0))+i.y+vec4(i1.y,i2.y,i3.y,1.0))+i.x+vec4(i1.x,i2.x,i3.x,1.0));vec4 ip=vec4(1.0/294.0,1.0/49.0,1.0/7.0,0.0);vec4 p0=grad4(j0,ip);vec4 p1=grad4(j1.x,ip);vec4 p2=grad4(j1.y,ip);vec4 p3=grad4(j1.z,ip);vec4 p4=grad4(j1.w,ip);vec4 norm=taylorInvSqrt(vec4(dot(p0,p0),dot(p1,p1),dot(p2,p2),dot(p3,p3)));p0*=norm.x;p1*=norm.y;p2*=norm.z;p3*=norm.w;p4*=taylorInvSqrt(dot(p4,p4));vec3 values0=vec3(dot(p0,x0),dot(p1,x1),dot(p2,x2));vec2 values1=vec2(dot(p3,x3),dot(p4,x4));vec3 m0=max(0.5-vec3(dot(x0,x0),dot(x1,x1),dot(x2,x2)),0.0);vec2 m1=max(0.5-vec2(dot(x3,x3),dot(x4,x4)),0.0);vec3 temp0=-6.0*m0*m0*values0;vec2 temp1=-6.0*m1*m1*values1;vec3 mmm0=m0*m0*m0;vec2 mmm1=m1*m1*m1;float dx=temp0[0]*x0.x+temp0[1]*x1.x+temp0[2]*x2.x+temp1[0]*x3.x+temp1[1]*x4.x+mmm0[0]*p0.x+mmm0[1]*p1.x+mmm0[2]*p2.x+mmm1[0]*p3.x+mmm1[1]*p4.x;float dy=temp0[0]*x0.y+temp0[1]*x1.y+temp0[2]*x2.y+temp1[0]*x3.y+temp1[1]*x4.y+mmm0[0]*p0.y+mmm0[1]*p1.y+mmm0[2]*p2.y+mmm1[0]*p3.y+mmm1[1]*p4.y;float dz=temp0[0]*x0.z+temp0[1]*x1.z+temp0[2]*x2.z+temp1[0]*x3.z+temp1[1]*x4.z+mmm0[0]*p0.z+mmm0[1]*p1.z+mmm0[2]*p2.z+mmm1[0]*p3.z+mmm1[1]*p4.z;float dw=temp0[0]*x0.w+temp0[1]*x1.w+temp0[2]*x2.w+temp1[0]*x3.w+temp1[1]*x4.w+mmm0[0]*p0.w+mmm0[1]*p1.w+mmm0[2]*p2.w+mmm1[0]*p3.w+mmm1[1]*p4.w;return vec4(dx,dy,dz,dw)*49.0;}vec3 curl(in vec3 p,in float noiseTime,in float persistence){vec4 xNoisePotentialDerivatives=vec4(0.0);vec4 yNoisePotentialDerivatives=vec4(0.0);vec4 zNoisePotentialDerivatives=vec4(0.0);for(int i=0;i<3;++i){float twoPowI=pow(2.0,float(i));float scale=0.5*twoPowI*pow(persistence,float(i));xNoisePotentialDerivatives+=simplexNoiseDerivatives(vec4(p*twoPowI,noiseTime))*scale;yNoisePotentialDerivatives+=simplexNoiseDerivatives(vec4((p+vec3(123.4,129845.6,-1239.1))*twoPowI,noiseTime))*scale;zNoisePotentialDerivatives+=simplexNoiseDerivatives(vec4((p+vec3(-9519.0,9051.0,-123.0))*twoPowI,noiseTime))*scale;}return vec3(zNoisePotentialDerivatives[1]-yNoisePotentialDerivatives[2],xNoisePotentialDerivatives[2]-zNoisePotentialDerivatives[0],yNoisePotentialDerivatives[0]-xNoisePotentialDerivatives[1]);}`,rt=`vec4 mod289(vec4 x){return x-floor(x*(1.0/289.0))*289.0;}float mod289(float x){return x-floor(x*(1.0/289.0))*289.0;}vec4 permute(vec4 x){return mod289(((x*34.0)+1.0)*x);}float permute(float x){return mod289(((x*34.0)+1.0)*x);}vec4 taylorInvSqrt(vec4 r){return 1.79284291400159-0.85373472095314*r;}float taylorInvSqrt(float r){return 1.79284291400159-0.85373472095314*r;}vec4 grad4(float j,vec4 ip){const vec4 ones=vec4(1.0,1.0,1.0,-1.0);vec4 p,s;p.xyz=floor(fract(vec3(j)*ip.xyz)*7.0)*ip.z-1.0;p.w=1.5-dot(abs(p.xyz),ones.xyz);s=vec4(lessThan(p,vec4(0.0)));p.xyz=p.xyz+(s.xyz*2.0-1.0)*s.www;return p;}
#define F4 0.309016994374947451
vec4 simplexNoiseDerivatives(vec4 v){const vec4 C=vec4(0.138196601125011,0.276393202250021,0.414589803375032,-0.447213595499958);vec4 i=floor(v+dot(v,vec4(F4)));vec4 x0=v-i+dot(i,C.xxxx);vec4 i0;vec3 isX=step(x0.yzw,x0.xxx);vec3 isYZ=step(x0.zww,x0.yyz);i0.x=isX.x+isX.y+isX.z;i0.yzw=1.0-isX;i0.y+=isYZ.x+isYZ.y;i0.zw+=1.0-isYZ.xy;i0.z+=isYZ.z;i0.w+=1.0-isYZ.z;vec4 i3=clamp(i0,0.0,1.0);vec4 i2=clamp(i0-1.0,0.0,1.0);vec4 i1=clamp(i0-2.0,0.0,1.0);vec4 x1=x0-i1+C.xxxx;vec4 x2=x0-i2+C.yyyy;vec4 x3=x0-i3+C.zzzz;vec4 x4=x0+C.wwww;i=mod289(i);float j0=permute(permute(permute(permute(i.w)+i.z)+i.y)+i.x);vec4 j1=permute(permute(permute(permute(i.w+vec4(i1.w,i2.w,i3.w,1.0))+i.z+vec4(i1.z,i2.z,i3.z,1.0))+i.y+vec4(i1.y,i2.y,i3.y,1.0))+i.x+vec4(i1.x,i2.x,i3.x,1.0));vec4 ip=vec4(1.0/294.0,1.0/49.0,1.0/7.0,0.0);vec4 p0=grad4(j0,ip);vec4 p1=grad4(j1.x,ip);vec4 p2=grad4(j1.y,ip);vec4 p3=grad4(j1.z,ip);vec4 p4=grad4(j1.w,ip);vec4 norm=taylorInvSqrt(vec4(dot(p0,p0),dot(p1,p1),dot(p2,p2),dot(p3,p3)));p0*=norm.x;p1*=norm.y;p2*=norm.z;p3*=norm.w;p4*=taylorInvSqrt(dot(p4,p4));vec3 values0=vec3(dot(p0,x0),dot(p1,x1),dot(p2,x2));vec2 values1=vec2(dot(p3,x3),dot(p4,x4));vec3 m0=max(0.5-vec3(dot(x0,x0),dot(x1,x1),dot(x2,x2)),0.0);vec2 m1=max(0.5-vec2(dot(x3,x3),dot(x4,x4)),0.0);vec3 temp0=-6.0*m0*m0*values0;vec2 temp1=-6.0*m1*m1*values1;vec3 mmm0=m0*m0*m0;vec2 mmm1=m1*m1*m1;float dx=temp0[0]*x0.x+temp0[1]*x1.x+temp0[2]*x2.x+temp1[0]*x3.x+temp1[1]*x4.x+mmm0[0]*p0.x+mmm0[1]*p1.x+mmm0[2]*p2.x+mmm1[0]*p3.x+mmm1[1]*p4.x;float dy=temp0[0]*x0.y+temp0[1]*x1.y+temp0[2]*x2.y+temp1[0]*x3.y+temp1[1]*x4.y+mmm0[0]*p0.y+mmm0[1]*p1.y+mmm0[2]*p2.y+mmm1[0]*p3.y+mmm1[1]*p4.y;float dz=temp0[0]*x0.z+temp0[1]*x1.z+temp0[2]*x2.z+temp1[0]*x3.z+temp1[1]*x4.z+mmm0[0]*p0.z+mmm0[1]*p1.z+mmm0[2]*p2.z+mmm1[0]*p3.z+mmm1[1]*p4.z;float dw=temp0[0]*x0.w+temp0[1]*x1.w+temp0[2]*x2.w+temp1[0]*x3.w+temp1[1]*x4.w+mmm0[0]*p0.w+mmm0[1]*p1.w+mmm0[2]*p2.w+mmm1[0]*p3.w+mmm1[1]*p4.w;return vec4(dx,dy,dz,dw)*49.0;}`,at="varying vec2 vUv;void main(){vUv=uv;gl_Position=projectionMatrix*modelViewMatrix*vec4(position,1.);}";exports.Animator=Ke;exports.CameraWrapper=_e;exports.MonoEventEmitter=me;exports.MousePointer=$e;exports.RendererWrapper=tt;exports.Resizer=it;exports.SceneWrapper=ae;exports.Spring=st;exports.TaskQueue=nt;exports.clamp=K;exports.clickout=fe;exports.createDebugTexture=ye;exports.createEmpytTexture=we;exports.curl=ot;exports.dampThreshold=k;exports.dampThresholdVec=Ue;exports.easeInBack=Re;exports.easeInBounce=he;exports.easeInCirc=Le;exports.easeInCubic=be;exports.easeInElastic=We;exports.easeInExpo=Fe;exports.easeInOutBack=Xe;exports.easeInOutBounce=Ge;exports.easeInOutCirc=Be;exports.easeInOutCubic=Se;exports.easeInOutElastic=Ve;exports.easeInOutExpo=Ae;exports.easeInOutQuad=Pe;exports.easeInOutQuart=Ce;exports.easeInOutQuint=Ne;exports.easeInOutSine=ge;exports.easeInQuad=Ie;exports.easeInQuart=Ee;exports.easeInQuint=je;exports.easeInSine=ze;exports.easeOutBack=Ye;exports.easeOutBounce=ce;exports.easeOutCirc=qe;exports.easeOutCubic=Oe;exports.easeOutElastic=Ze;exports.easeOutExpo=Qe;exports.easeOutQuad=Te;exports.easeOutQuart=De;exports.easeOutQuint=ke;exports.easeOutSine=Me;exports.isBetween=He;exports.lerp=xe;exports.now=ee;exports.simplexNoiseDerivatives=rt;exports.vsfx=at;exports.wait=Je;
